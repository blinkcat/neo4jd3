!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Neo4jd3=t()}}(function(){return function(){function t(e,n,o){function r(i,c){if(!n[i]){if(!e[i]){var s="function"==typeof require&&require;if(!c&&s)return s(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};e[i][0].call(l.exports,function(t){return r(e[i][1][t]||t)},l,l.exports,t,e,n,o)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}return t}()({1:[function(t,e,n){"use strict";var o=t("./scripts/neo4jd3");e.exports=o},{"./scripts/neo4jd3":2}],2:[function(t,e,n){"use strict";function o(t,e){function n(t){bt=t.append("svg").attr("width","100%").attr("height","100%").attr("class","neo4jd3-graph").call(d3.zoom().on("zoom",function(){var t=d3.event.transform.k,e=[d3.event.transform.x,d3.event.transform.y];wt&&(e[0]+=wt[0],e[1]+=wt[1]),kt&&(t*=kt),bt.attr("transform","translate("+e[0]+", "+e[1]+") scale("+t+")")})).on("dblclick.zoom",null).append("g").attr("width","100%").attr("height","100%"),Mt=bt.append("g").attr("class","relationships"),Dt=bt.append("g").attr("class","nodes")}function o(t){return t.append("image").attr("height",function(t){return E(t)?"24px":"30px"}).attr("x",function(t){return E(t)?"5px":"-15px"}).attr("xlink:href",function(t){return O(t)}).attr("y",function(t){return E(t)?"5px":"-16px"}).attr("width",function(t){return E(t)?"24px":"30px"})}function r(t){return t.append("div").attr("class","neo4jd3-info")}function a(t,e,n,o){var r=lt.append("a");r.attr("href","#").attr("class",t).html("<strong>"+n+"</strong>"+(o?": "+o:"")),o||r.style("background-color",function(t){return Rt.nodeOutlineFillColor?Rt.nodeOutlineFillColor:e?b(n):w()}).style("border-color",function(t){return Rt.nodeOutlineFillColor?D(Rt.nodeOutlineFillColor):e?D(n):j()}).style("color",function(t){return Rt.nodeOutlineFillColor?D(Rt.nodeOutlineFillColor):"#fff"})}function i(t,e){a(t,!0,e)}function c(t,e,n){a(t,!1,e,n)}function s(t,e){a(t,!1,e)}function u(){return ft.enter().append("g").attr("class",function(t){var e,n,o="node";t.labels[0];if(E(t)&&(o+=" node-icon"),O(t)&&(o+=" node-image"),Rt.highlight)for(n=0;n<Rt.highlight.length;n++)if(e=Rt.highlight[n],t.labels[0]===e.class&&t.properties[e.property]===e.value){o+=" node-highlighted";break}return o}).on("click",function(t){t.fx=t.fy=null,"function"==typeof Rt.onNodeClick&&Rt.onNodeClick(t)}).on("dblclick",function(t){"function"==typeof Rt.onNodeDoubleClick&&Rt.onNodeDoubleClick(t)}).on("mouseenter",function(t){lt&&ot(t),"function"==typeof Rt.onNodeMouseEnter&&Rt.onNodeMouseEnter(t)}).on("mouseleave",function(t){lt&&M(t),"function"==typeof Rt.onNodeMouseLeave&&Rt.onNodeMouseLeave(t)}).call(d3.drag().on("start",R).on("drag",N).on("end",C))}function l(){var t=u();return d(t),f(t),Rt.icons&&p(t),Rt.images&&o(t),t}function f(t){return t.append("circle").attr("class","outline").attr("r",Rt.nodeRadius).style("fill",function(t){return Rt.nodeOutlineFillColor?Rt.nodeOutlineFillColor:b(t.labels[0])}).style("stroke",function(t){return D(Rt.nodeOutlineFillColor?Rt.nodeOutlineFillColor:t.labels[0])})}function d(t){return t.append("circle").attr("class","ring").attr("r",1.16*Rt.nodeRadius)}function p(t){return t.append("text").attr("class",function(t){return"text"+(E(t)?" icon":"")}).attr("fill","#ffffff").attr("font-size",function(t){return E(t)?Rt.nodeRadius+"px":"10px"}).attr("pointer-events","none").attr("text-anchor","middle").attr("y",function(t){return E(t)?parseInt(Math.round(.32*Rt.nodeRadius))+"px":"4px"}).html(function(t){var e=E(t);return e?"&#x"+e:t.id})}function y(t,e){nt(I(t,e))}function x(){return pt.enter().append("g").attr("class","relationship").on("dblclick",function(t){"function"==typeof Rt.onRelationshipDoubleClick&&Rt.onRelationshipDoubleClick(t)}).on("mouseenter",function(t){lt&&ot(t)})}function h(t){return t.append("path").attr("class","outline").attr("fill","#a5abb6").attr("stroke","none")}function g(t){return t.append("path").attr("class","overlay")}function v(t){return t.append("text").attr("class","text").attr("fill","#000000").attr("font-size","8px").attr("pointer-events","none").attr("text-anchor","middle").text(function(t){return t.type})}function m(){var t=x(),e=v(t);return{outline:h(t),overlay:g(t),relationship:t,text:e}}function b(t){var e=jt[t];return e||(e=Rt.colors[Nt%Rt.colors.length],jt[t]=e,Nt++),e}function D(t){return d3.rgb(b(t)).darker(1)}function M(){lt.html("")}function k(t,e){return t.filter(function(t){return t.id===e}).length>0}function w(){return Rt.relationshipColor}function j(){return d3.rgb(Rt.colors[Rt.colors.length-1]).darker(1)}function C(t){d3.event.active||mt.alphaTarget(0),"function"==typeof Rt.onNodeDragEnd&&Rt.onNodeDragEnd(t)}function N(t){J(t)}function R(t){d3.event.active||mt.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y,"function"==typeof Rt.onNodeDragStart&&Rt.onNodeDragStart(t)}function E(t){var e;return Rt.iconMap&&Rt.showIcons&&Rt.icons&&(Rt.icons[t.labels[0]]&&Rt.iconMap[Rt.icons[t.labels[0]]]?e=Rt.iconMap[Rt.icons[t.labels[0]]]:Rt.iconMap[t.labels[0]]?e=Rt.iconMap[t.labels[0]]:Rt.icons[t.labels[0]]&&(e=Rt.icons[t.labels[0]])),e}function O(t){var e,n,o,r,a,i,c,s;if(Rt.images&&(n=Rt.imageMap[t.labels[0]]))for(r=0,e=0;e<n.length;e++){switch(i=n[e].split("|"),i.length){case 3:s=i[2];case 2:c=i[1];case 1:a=i[0]}t.labels[0]!==a||c&&void 0===t.properties[c]||s&&t.properties[c]!==s||i.length>r&&(o=Rt.images[n[e]],r=i.length)}return o}function z(t,e){L(),B(Rt,e),Rt.icons&&(Rt.showIcons=!0),Rt.minCollision||(Rt.minCollision=2*Rt.nodeRadius),F(),vt=t,ut=d3.select(vt),ut.attr("class","neo4jd3").html(""),Rt.infoPanel&&(lt=r(ut)),n(ut),mt=S(),Rt.neo4jData?U(Rt.neo4jData):Rt.neo4jDataUrl?A(Rt.neo4jDataUrl):console.error("Error: both neo4jData and neo4jDataUrl are empty!")}function L(){Object.keys(Rt.iconMap).forEach(function(t,e){var n=t.split(","),o=Rt.iconMap[t];n.forEach(function(t){Rt.iconMap[t]=o})})}function F(){var t,e;for(t in Rt.images)Rt.images.hasOwnProperty(t)&&(e=t.split("|"),Rt.imageMap[e[0]]?Rt.imageMap[e[0]].push(t):Rt.imageMap[e[0]]=[t])}function S(){return d3.forceSimulation().velocityDecay(e.velocityDecay||Rt.velocityDecay).alphaDecay(e.alphaDecay||Rt.alphaDecay).force("collide",d3.forceCollide().radius(function(t){return Rt.minCollision}).iterations(2)).force("charge",d3.forceManyBody()).force("link",d3.forceLink().id(function(t){return t.id})).force("center",d3.forceCenter(bt.node().parentElement.parentElement.clientWidth/2,bt.node().parentElement.parentElement.clientHeight/2)).on("tick",function(){G()}).on("end",function(){Rt.zoomFit&&!Ct&&(Ct=!0,st(2))})}function U(){dt=[],gt=[],nt(Rt.neo4jData)}function A(t){dt=[],gt=[],d3.json(t,function(t,e){if(t)throw t;nt(e)})}function B(t,e){Object.keys(e).forEach(function(n){t[n]=e[n]})}function q(t){var e={nodes:[],relationships:[]};return t.results.forEach(function(t){t.data.forEach(function(t){t.graph.nodes.forEach(function(t){k(e.nodes,t.id)||e.nodes.push(t)}),t.graph.relationships.forEach(function(t){t.source=t.startNode,t.target=t.endNode,e.relationships.push(t)}),t.graph.relationships.sort(function(t,e){return t.source>e.source?1:t.source<e.source?-1:t.target>e.target?1:t.target<e.target?-1:0});for(var n=0;n<t.graph.relationships.length;n++)0!==n&&t.graph.relationships[n].source===t.graph.relationships[n-1].source&&t.graph.relationships[n].target===t.graph.relationships[n-1].target?t.graph.relationships[n].linknum=t.graph.relationships[n-1].linknum+1:t.graph.relationships[n].linknum=1})}),e}function I(t,e){var n,o,r,a,i={nodes:[],relationships:[]},c=1+(e*Math.random()<<0),s=_();for(n=0;n<c;n++)o=P(),r={id:s.nodes+1+n,labels:[o],properties:{random:o},x:t.x,y:t.y},i.nodes[i.nodes.length]=r,a={id:s.relationships+1+n,type:o.toUpperCase(),startNode:t.id,endNode:s.nodes+1+n,properties:{from:Date.now()},source:t.id,target:s.nodes+1+n,linknum:s.relationships+1+n},i.relationships[i.relationships.length]=a;return i}function P(){var t=Object.keys(Rt.iconMap);return t[t.length*Math.random()<<0]}function T(n){var o=Object.assign(e,{neo4jData:n,neo4jDataUrl:void 0});z(t,o)}function W(t,e,n,o,r){var a=Math.PI/180*r,i=Math.cos(a),c=Math.sin(a);return{x:i*(n-t)+c*(o-e)+t,y:i*(o-e)-c*(n-t)+e}}function Z(t,e,n){return W(t.x,t.y,e.x,e.y,n)}function H(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}function _(){return{nodes:dt.length,relationships:gt.length}}function J(t){t.fx=d3.event.x,t.fy=d3.event.y}function G(){K(),Q()}function K(){ft&&ft.attr("transform",function(t){return"translate("+t.x+", "+t.y+")"})}function Q(){pt&&(pt.attr("transform",function(t){var e=H(t.source,t.target);return"translate("+t.source.x+", "+t.source.y+") rotate("+e+")"}),Y(),V(),X())}function V(){pt.each(function(t){var e=d3.select(this),n=e.select(".outline"),o=e.select(".text");o.node().getBBox();n.attr("d",function(t){var e={x:0,y:0},n=H(t.source,t.target),r=o.node().getBBox(),a=tt(t.source,t.target),i={x:.5*(t.target.x-t.source.x-(r.width+5)*a.x),y:.5*(t.target.y-t.source.y-(r.width+5)*a.y)},c=$(t.source,t.target),s=Z(e,{x:0+(Rt.nodeRadius+1)*a.x-c.x,y:0+(Rt.nodeRadius+1)*a.y-c.y},n),u=Z(e,{x:i.x-c.x,y:i.y-c.y},n),l=Z(e,{x:i.x,y:i.y},n),f=Z(e,{x:0+(Rt.nodeRadius+1)*a.x,y:0+(Rt.nodeRadius+1)*a.y},n),d=Z(e,{x:t.target.x-t.source.x-i.x-c.x,y:t.target.y-t.source.y-i.y-c.y},n),p=Z(e,{x:t.target.x-t.source.x-(Rt.nodeRadius+1)*a.x-c.x-a.x*Rt.arrowSize,y:t.target.y-t.source.y-(Rt.nodeRadius+1)*a.y-c.y-a.y*Rt.arrowSize},n),y=Z(e,{x:t.target.x-t.source.x-(Rt.nodeRadius+1)*a.x-c.x+(c.x-a.x)*Rt.arrowSize,y:t.target.y-t.source.y-(Rt.nodeRadius+1)*a.y-c.y+(c.y-a.y)*Rt.arrowSize},n),x=Z(e,{x:t.target.x-t.source.x-(Rt.nodeRadius+1)*a.x,y:t.target.y-t.source.y-(Rt.nodeRadius+1)*a.y},n),h=Z(e,{x:t.target.x-t.source.x-(Rt.nodeRadius+1)*a.x+(-c.x-a.x)*Rt.arrowSize,y:t.target.y-t.source.y-(Rt.nodeRadius+1)*a.y+(-c.y-a.y)*Rt.arrowSize},n),g=Z(e,{x:t.target.x-t.source.x-(Rt.nodeRadius+1)*a.x-a.x*Rt.arrowSize,y:t.target.y-t.source.y-(Rt.nodeRadius+1)*a.y-a.y*Rt.arrowSize},n),v=Z(e,{x:t.target.x-t.source.x-i.x,y:t.target.y-t.source.y-i.y},n);return"M "+s.x+" "+s.y+" L "+u.x+" "+u.y+" L "+l.x+" "+l.y+" L "+f.x+" "+f.y+" Z M "+d.x+" "+d.y+" L "+p.x+" "+p.y+" L "+y.x+" "+y.y+" L "+x.x+" "+x.y+" L "+h.x+" "+h.y+" L "+g.x+" "+g.y+" L "+v.x+" "+v.y+" Z"})})}function X(){xt.attr("d",function(t){var e={x:0,y:0},n=H(t.source,t.target),o=$(t.source,t.target),r=$(t.source,t.target,50),a=Z(e,{x:0-r.x,y:0-r.y},n),i=Z(e,{x:t.target.x-t.source.x-r.x,y:t.target.y-t.source.y-r.y},n),c=Z(e,{x:t.target.x-t.source.x+r.x-o.x,y:t.target.y-t.source.y+r.y-o.y},n),s=Z(e,{x:0+r.x-o.x,y:0+r.y-o.y},n);return"M "+a.x+" "+a.y+" L "+i.x+" "+i.y+" L "+c.x+" "+c.y+" L "+s.x+" "+s.y+" Z"})}function Y(){ht.attr("transform",function(t){var e=(H(t.source,t.target)+360)%360,n=e>90&&e<270,o={x:0,y:0},r=$(t.source,t.target),a=n?2:-3,i={x:.5*(t.target.x-t.source.x)+r.x*a,y:.5*(t.target.y-t.source.y)+r.y*a},c=Z(o,i,e);return"translate("+c.x+", "+c.y+") rotate("+(n?180:0)+")"})}function $(t,e,n){return Z({x:0,y:0},tt(t,e,n),90)}function tt(t,e,n){var o=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))/Math.sqrt(n||1);return{x:(e.x-t.x)/o,y:(e.y-t.y)/o}}function et(t){at(t.nodes,t.relationships)}function nt(t){et(q(t))}function ot(t){M(),t.labels?i("class",t.labels[0]):s("class",t.type),c("property","&lt;id&gt;",t.id),Object.keys(t.properties).forEach(function(e){c("property",e,JSON.stringify(t.properties[e]))})}function rt(t){Array.prototype.push.apply(dt,t),ft=Dt.selectAll(".node").data(dt,function(t){return t.id});var e=l();ft=e.merge(ft)}function at(t,e){it(e),rt(t),mt.nodes(dt),mt.force("link").links(gt)}function it(t){Array.prototype.push.apply(gt,t),pt=Mt.selectAll(".relationship").data(gt,function(t){return t.id});var e=m();pt=e.relationship.merge(pt),yt=bt.selectAll(".relationship .outline"),yt=e.outline.merge(yt),xt=bt.selectAll(".relationship .overlay"),xt=e.overlay.merge(xt),ht=bt.selectAll(".relationship .text"),ht=e.text.merge(ht)}function ct(){return Et}function st(t){var e=bt.node().getBBox(),n=bt.node().parentElement.parentElement,o=n.clientWidth,r=n.clientHeight,a=e.width,i=e.height,c=e.x+a/2,s=e.y+i/2;0!==a&&0!==i&&(kt=.85/Math.max(a/o,i/r),wt=[o/2-kt*c,r/2-kt*s],bt.attr("transform","translate("+wt[0]+", "+wt[1]+") scale("+kt+")"))}var ut,lt,ft,dt,pt,yt,xt,ht,gt,vt,mt,bt,Dt,Mt,kt,wt,jt={},Ct=!1,Nt=0,Rt={arrowSize:4,colors:function(){return["#68bdf6","#6dce9e","#faafc2","#f2baf6","#ff928c","#fcea7e","#ffc766","#405f9e","#a5abb6","#78cecb","#b88cbb","#ced2d9","#e84646","#fa5f86","#ffab1a","#fcda19","#797b80","#c9d96f","#47991f","#70edee","#ff75ea"]}(),highlight:void 0,iconMap:function(){return{}}(),icons:void 0,imageMap:{},images:void 0,infoPanel:!0,minCollision:void 0,neo4jData:void 0,neo4jDataUrl:void 0,nodeOutlineFillColor:void 0,nodeRadius:25,relationshipColor:"#a5abb6",zoomFit:!1,velocityDecay:.4,alphaDecay:.0228},Et="0.0.1";return z(t,e),{appendRandomDataToNode:y,neo4jDataToD3Data:q,randomD3Data:I,resetWithNeo4jData:T,size:_,updateWithD3Data:et,updateWithNeo4jData:nt,version:ct}}e.exports=o},{}]},{},[1])(1)});