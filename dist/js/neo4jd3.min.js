!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Neo4jd3=t()}}(function(){return function(){function t(e,n,o){function r(i,c){if(!n[i]){if(!e[i]){var s="function"==typeof require&&require;if(!c&&s)return s(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};e[i][0].call(l.exports,function(t){return r(e[i][1][t]||t)},l,l.exports,t,e,n,o)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}return t}()({1:[function(t,e,n){"use strict";var o=t("./scripts/neo4jd3");e.exports=o},{"./scripts/neo4jd3":2}],2:[function(t,e,n){"use strict";function o(t,e){function n(t){vt=t.append("svg").attr("width","100%").attr("height","100%").attr("class","neo4jd3-graph").call(d3.zoom().on("zoom",function(){var t=d3.event.transform.k,e=[d3.event.transform.x,d3.event.transform.y];kt&&(e[0]+=kt[0],e[1]+=kt[1]),Mt&&(t*=Mt),vt.attr("transform","translate("+e[0]+", "+e[1]+") scale("+t+")")})).on("dblclick.zoom",null).append("g").attr("width","100%").attr("height","100%"),Dt=vt.append("g").attr("class","relationships"),bt=vt.append("g").attr("class","nodes")}function o(t){return t.append("image").attr("height",function(t){return E(t)?"24px":"30px"}).attr("x",function(t){return E(t)?"5px":"-15px"}).attr("xlink:href",function(t){return O(t)}).attr("y",function(t){return E(t)?"5px":"-16px"}).attr("width",function(t){return E(t)?"24px":"30px"})}function r(t){return t.append("div").attr("class","neo4jd3-info")}function a(t,e,n,o){var r=ut.append("a");r.attr("href","#").attr("class",t).html("<strong>"+n+"</strong>"+(o?": "+o:"")),o||r.style("background-color",function(t){return Nt.nodeOutlineFillColor?Nt.nodeOutlineFillColor:e?b(n):w()}).style("border-color",function(t){return Nt.nodeOutlineFillColor?D(Nt.nodeOutlineFillColor):e?D(n):C()}).style("color",function(t){return Nt.nodeOutlineFillColor?D(Nt.nodeOutlineFillColor):"#fff"})}function i(t,e){a(t,!0,e)}function c(t,e,n){a(t,!1,e,n)}function s(t,e){a(t,!1,e)}function u(){return lt.enter().append("g").attr("class",function(t){var e,n,o="node";t.labels[0];if(E(t)&&(o+=" node-icon"),O(t)&&(o+=" node-image"),Nt.highlight)for(n=0;n<Nt.highlight.length;n++)if(e=Nt.highlight[n],t.labels[0]===e.class&&t.properties[e.property]===e.value){o+=" node-highlighted";break}return o}).on("click",function(t){t.fx=t.fy=null,"function"==typeof Nt.onNodeClick&&Nt.onNodeClick(t)}).on("dblclick",function(t){"function"==typeof Nt.onNodeDoubleClick&&Nt.onNodeDoubleClick(t)}).on("mouseenter",function(t){ut&&nt(t),"function"==typeof Nt.onNodeMouseEnter&&Nt.onNodeMouseEnter(t)}).on("mouseleave",function(t){ut&&M(t),"function"==typeof Nt.onNodeMouseLeave&&Nt.onNodeMouseLeave(t)}).call(d3.drag().on("start",R).on("drag",N).on("end",j))}function l(){var t=u();return d(t),f(t),Nt.icons&&p(t),Nt.images&&o(t),t}function f(t){return t.append("circle").attr("class","outline").attr("r",Nt.nodeRadius).style("fill",function(t){return Nt.nodeOutlineFillColor?Nt.nodeOutlineFillColor:b(t.labels[0])}).style("stroke",function(t){return D(Nt.nodeOutlineFillColor?Nt.nodeOutlineFillColor:t.labels[0])}).append("title").text(function(t){return X(t)})}function d(t){return t.append("circle").attr("class","ring").attr("r",1.16*Nt.nodeRadius).append("title").text(function(t){return X(t)})}function p(t){return t.append("text").attr("class",function(t){return"text"+(E(t)?" icon":"")}).attr("fill","#ffffff").attr("font-size",function(t){return E(t)?Nt.nodeRadius+"px":"10px"}).attr("pointer-events","none").attr("text-anchor","middle").attr("y",function(t){return E(t)?parseInt(Math.round(.32*Nt.nodeRadius))+"px":"4px"}).html(function(t){var e=E(t);return e?"&#x"+e:t.id})}function y(t,e){et(q(t,e))}function x(){return dt.enter().append("g").attr("class","relationship").on("dblclick",function(t){"function"==typeof Nt.onRelationshipDoubleClick&&Nt.onRelationshipDoubleClick(t)}).on("mouseenter",function(t){ut&&nt(t)})}function h(t){return t.append("path").attr("class","outline").attr("fill","#a5abb6").attr("stroke","none")}function g(t){return t.append("path").attr("class","overlay")}function m(t){return t.append("text").attr("class","text").attr("fill","#000000").attr("font-size","8px").attr("pointer-events","none").attr("text-anchor","middle").text(function(t){return t.type})}function v(){var t=x(),e=m(t);return{outline:h(t),overlay:g(t),relationship:t,text:e}}function b(t){var e=wt[t];return e||(e=Nt.colors[jt%Nt.colors.length],wt[t]=e,jt++),e}function D(t){return d3.rgb(b(t)).darker(1)}function M(){ut.html("")}function k(t,e){return t.filter(function(t){return t.id===e}).length>0}function w(){return Nt.relationshipColor}function C(){return d3.rgb(Nt.colors[Nt.colors.length-1]).darker(1)}function j(t){d3.event.active||mt.alphaTarget(0),"function"==typeof Nt.onNodeDragEnd&&Nt.onNodeDragEnd(t)}function N(t){H(t)}function R(t){d3.event.active||mt.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y,"function"==typeof Nt.onNodeDragStart&&Nt.onNodeDragStart(t)}function E(t){var e;return Nt.iconMap&&Nt.showIcons&&Nt.icons&&(Nt.icons[t.labels[0]]&&Nt.iconMap[Nt.icons[t.labels[0]]]?e=Nt.iconMap[Nt.icons[t.labels[0]]]:Nt.iconMap[t.labels[0]]?e=Nt.iconMap[t.labels[0]]:Nt.icons[t.labels[0]]&&(e=Nt.icons[t.labels[0]])),e}function O(t){var e,n,o,r,a,i,c,s;if(Nt.images&&(n=Nt.imageMap[t.labels[0]]))for(r=0,e=0;e<n.length;e++){switch(i=n[e].split("|"),i.length){case 3:s=i[2];case 2:c=i[1];case 1:a=i[0]}t.labels[0]!==a||c&&void 0===t.properties[c]||s&&t.properties[c]!==s||i.length>r&&(o=Nt.images[n[e]],r=i.length)}return o}function z(){Object.keys(Nt.iconMap).forEach(function(t,e){var n=t.split(","),o=Nt.iconMap[t];n.forEach(function(t){Nt.iconMap[t]=o})})}function L(){var t,e;for(t in Nt.images)Nt.images.hasOwnProperty(t)&&(e=t.split("|"),Nt.imageMap[e[0]]?Nt.imageMap[e[0]].push(t):Nt.imageMap[e[0]]=[t])}function F(){return d3.forceSimulation().velocityDecay(e.velocityDecay||Nt.velocityDecay).alphaDecay(e.alphaDecay||Nt.alphaDecay).force("collide",d3.forceCollide().radius(function(t){return Nt.minCollision}).iterations(2)).force("charge",d3.forceManyBody()).force("link",d3.forceLink().id(function(t){return t.id})).force("center",d3.forceCenter(vt.node().parentElement.parentElement.clientWidth/2,vt.node().parentElement.parentElement.clientHeight/2)).on("tick",function(){J()}).on("end",function(){Nt.zoomFit&&!Ct&&(Ct=!0,ct(2))})}function S(){ft=[],ht=[],et(Nt.neo4jData)}function A(t){ft=[],ht=[],d3.json(t,function(t,e){if(t)throw t;et(e)})}function B(t,e){Object.keys(e).forEach(function(n){t[n]=e[n]})}function U(t){var e={nodes:[],relationships:[]};return t.results.forEach(function(t){t.data.forEach(function(t){t.graph.nodes.forEach(function(t){k(e.nodes,t.id)||e.nodes.push(t)}),t.graph.relationships.forEach(function(t){t.source=t.startNode,t.target=t.endNode,e.relationships.push(t)}),t.graph.relationships.sort(function(t,e){return t.source>e.source?1:t.source<e.source?-1:t.target>e.target?1:t.target<e.target?-1:0});for(var n=0;n<t.graph.relationships.length;n++)0!==n&&t.graph.relationships[n].source===t.graph.relationships[n-1].source&&t.graph.relationships[n].target===t.graph.relationships[n-1].target?t.graph.relationships[n].linknum=t.graph.relationships[n-1].linknum+1:t.graph.relationships[n].linknum=1})}),e}function q(t,e){var n,o,r,a,i={nodes:[],relationships:[]},c=1+(e*Math.random()<<0),s=Z();for(n=0;n<c;n++)o=I(),r={id:s.nodes+1+n,labels:[o],properties:{random:o},x:t.x,y:t.y},i.nodes[i.nodes.length]=r,a={id:s.relationships+1+n,type:o.toUpperCase(),startNode:t.id,endNode:s.nodes+1+n,properties:{from:Date.now()},source:t.id,target:s.nodes+1+n,linknum:s.relationships+1+n},i.relationships[i.relationships.length]=a;return i}function I(){var t=Object.keys(Nt.iconMap);return t[t.length*Math.random()<<0]}function P(t,e,n,o,r){var a=Math.PI/180*r,i=Math.cos(a),c=Math.sin(a);return{x:i*(n-t)+c*(o-e)+t,y:i*(o-e)-c*(n-t)+e}}function T(t,e,n){return P(t.x,t.y,e.x,e.y,n)}function W(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI}function Z(){return{nodes:ft.length,relationships:ht.length}}function H(t){t.fx=d3.event.x,t.fy=d3.event.y}function J(){_(),G()}function _(){lt&&lt.attr("transform",function(t){return"translate("+t.x+", "+t.y+")"})}function G(){dt&&(dt.attr("transform",function(t){var e=W(t.source,t.target);return"translate("+t.source.x+", "+t.source.y+") rotate("+e+")"}),V(),K(),Q())}function K(){dt.each(function(t){var e=d3.select(this),n=e.select(".outline"),o=e.select(".text");o.node().getBBox();n.attr("d",function(t){var e={x:0,y:0},n=W(t.source,t.target),r=o.node().getBBox(),a=$(t.source,t.target),i={x:.5*(t.target.x-t.source.x-(r.width+5)*a.x),y:.5*(t.target.y-t.source.y-(r.width+5)*a.y)},c=Y(t.source,t.target),s=T(e,{x:0+(Nt.nodeRadius+1)*a.x-c.x,y:0+(Nt.nodeRadius+1)*a.y-c.y},n),u=T(e,{x:i.x-c.x,y:i.y-c.y},n),l=T(e,{x:i.x,y:i.y},n),f=T(e,{x:0+(Nt.nodeRadius+1)*a.x,y:0+(Nt.nodeRadius+1)*a.y},n),d=T(e,{x:t.target.x-t.source.x-i.x-c.x,y:t.target.y-t.source.y-i.y-c.y},n),p=T(e,{x:t.target.x-t.source.x-(Nt.nodeRadius+1)*a.x-c.x-a.x*Nt.arrowSize,y:t.target.y-t.source.y-(Nt.nodeRadius+1)*a.y-c.y-a.y*Nt.arrowSize},n),y=T(e,{x:t.target.x-t.source.x-(Nt.nodeRadius+1)*a.x-c.x+(c.x-a.x)*Nt.arrowSize,y:t.target.y-t.source.y-(Nt.nodeRadius+1)*a.y-c.y+(c.y-a.y)*Nt.arrowSize},n),x=T(e,{x:t.target.x-t.source.x-(Nt.nodeRadius+1)*a.x,y:t.target.y-t.source.y-(Nt.nodeRadius+1)*a.y},n),h=T(e,{x:t.target.x-t.source.x-(Nt.nodeRadius+1)*a.x+(-c.x-a.x)*Nt.arrowSize,y:t.target.y-t.source.y-(Nt.nodeRadius+1)*a.y+(-c.y-a.y)*Nt.arrowSize},n),g=T(e,{x:t.target.x-t.source.x-(Nt.nodeRadius+1)*a.x-a.x*Nt.arrowSize,y:t.target.y-t.source.y-(Nt.nodeRadius+1)*a.y-a.y*Nt.arrowSize},n),m=T(e,{x:t.target.x-t.source.x-i.x,y:t.target.y-t.source.y-i.y},n);return"M "+s.x+" "+s.y+" L "+u.x+" "+u.y+" L "+l.x+" "+l.y+" L "+f.x+" "+f.y+" Z M "+d.x+" "+d.y+" L "+p.x+" "+p.y+" L "+y.x+" "+y.y+" L "+x.x+" "+x.y+" L "+h.x+" "+h.y+" L "+g.x+" "+g.y+" L "+m.x+" "+m.y+" Z"})})}function Q(){yt.attr("d",function(t){var e={x:0,y:0},n=W(t.source,t.target),o=Y(t.source,t.target),r=Y(t.source,t.target,50),a=T(e,{x:0-r.x,y:0-r.y},n),i=T(e,{x:t.target.x-t.source.x-r.x,y:t.target.y-t.source.y-r.y},n),c=T(e,{x:t.target.x-t.source.x+r.x-o.x,y:t.target.y-t.source.y+r.y-o.y},n),s=T(e,{x:0+r.x-o.x,y:0+r.y-o.y},n);return"M "+a.x+" "+a.y+" L "+i.x+" "+i.y+" L "+c.x+" "+c.y+" L "+s.x+" "+s.y+" Z"})}function V(){xt.attr("transform",function(t){var e=(W(t.source,t.target)+360)%360,n=e>90&&e<270,o={x:0,y:0},r=Y(t.source,t.target),a=n?2:-3,i={x:.5*(t.target.x-t.source.x)+r.x*a,y:.5*(t.target.y-t.source.y)+r.y*a},c=T(o,i,e);return"translate("+c.x+", "+c.y+") rotate("+(n?180:0)+")"})}function X(t){var e=t.labels?t.labels[0]:t.type;return e+=" (<id>: "+t.id,Object.keys(t.properties).forEach(function(n){e+=", "+n+": "+JSON.stringify(t.properties[n])}),e+=")"}function Y(t,e,n){return T({x:0,y:0},$(t,e,n),90)}function $(t,e,n){var o=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))/Math.sqrt(n||1);return{x:(e.x-t.x)/o,y:(e.y-t.y)/o}}function tt(t){rt(t.nodes,t.relationships)}function et(t){tt(U(t))}function nt(t){M(),t.labels?i("class",t.labels[0]):s("class",t.type),c("property","&lt;id&gt;",t.id),Object.keys(t.properties).forEach(function(e){c("property",e,JSON.stringify(t.properties[e]))})}function ot(t){Array.prototype.push.apply(ft,t),lt=bt.selectAll(".node").data(ft,function(t){return t.id});var e=l();lt=e.merge(lt)}function rt(t,e){at(e),ot(t),mt.nodes(ft),mt.force("link").links(ht)}function at(t){Array.prototype.push.apply(ht,t),dt=Dt.selectAll(".relationship").data(ht,function(t){return t.id});var e=v();dt=e.relationship.merge(dt),pt=vt.selectAll(".relationship .outline"),pt=e.outline.merge(pt),yt=vt.selectAll(".relationship .overlay"),yt=e.overlay.merge(yt),xt=vt.selectAll(".relationship .text"),xt=e.text.merge(xt)}function it(){return Rt}function ct(t){var e=vt.node().getBBox(),n=vt.node().parentElement.parentElement,o=n.clientWidth,r=n.clientHeight,a=e.width,i=e.height,c=e.x+a/2,s=e.y+i/2;0!==a&&0!==i&&(Mt=.85/Math.max(a/o,i/r),kt=[o/2-Mt*c,r/2-Mt*s],vt.attr("transform","translate("+kt[0]+", "+kt[1]+") scale("+Mt+")"))}var st,ut,lt,ft,dt,pt,yt,xt,ht,gt,mt,vt,bt,Dt,Mt,kt,wt={},Ct=!1,jt=0,Nt={arrowSize:4,colors:function(){return["#68bdf6","#6dce9e","#faafc2","#f2baf6","#ff928c","#fcea7e","#ffc766","#405f9e","#a5abb6","#78cecb","#b88cbb","#ced2d9","#e84646","#fa5f86","#ffab1a","#fcda19","#797b80","#c9d96f","#47991f","#70edee","#ff75ea"]}(),highlight:void 0,iconMap:function(){return{}}(),icons:void 0,imageMap:{},images:void 0,infoPanel:!0,minCollision:void 0,neo4jData:void 0,neo4jDataUrl:void 0,nodeOutlineFillColor:void 0,nodeRadius:25,relationshipColor:"#a5abb6",zoomFit:!1,velocityDecay:.4,alphaDecay:.0228},Rt="0.0.1";return function(t,e){z(),B(Nt,e),Nt.icons&&(Nt.showIcons=!0),Nt.minCollision||(Nt.minCollision=2*Nt.nodeRadius),L(),gt=t,st=d3.select(gt),st.attr("class","neo4jd3").html(""),Nt.infoPanel&&(ut=r(st)),n(st),mt=F(),Nt.neo4jData?S(Nt.neo4jData):Nt.neo4jDataUrl?A(Nt.neo4jDataUrl):console.error("Error: both neo4jData and neo4jDataUrl are empty!")}(t,e),{appendRandomDataToNode:y,neo4jDataToD3Data:U,randomD3Data:q,size:Z,updateWithD3Data:tt,updateWithNeo4jData:et,version:it}}e.exports=o},{}]},{},[1])(1)});